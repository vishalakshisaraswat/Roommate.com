 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roommate Preferences</title>
    <link rel="stylesheet" href="stl.css">
</head>
<body>
    <div class="card">
        <h1><U>Roommate Preferences</U></h1>
        <form id="ques-withRoom-form" action="/ques-withRoom/submit-form" method="POST">
            
            <div class="question">
                <label><h2>Prefered gender for your roommate:</h2></label>
                <label><input type="radio" name="gender-preference" value="male" required> Male</label>
                <label><input type="radio" name="gender-preference" value="female"> Female</label>
                <label><input type="radio" name="gender-preference" value="no-preference"> No Preference</label>
            </div>

            
            <div class="question">
                <label><h2>What is your preferred age range for your roommate?</h2></label>
                <select name="age-group" required>
                    <option value="" disabled selected>Select age group</option>
                    <option value="18-25">18-25</option>
                    <option value="26-35">26-35</option>
                    <option value="36-45">36-45</option>
                    <option value="no-preference">No Preference</option>
                </select>
            </div>

            
            <div class="question">
                <label><h2>Your preferred Sleeping Schedule:</h2></label>
                <label><input type="radio" name="sleeping-schedule" value="morning-person" required> Morning Person</label>
                <label><input type="radio" name="sleeping-schedule" value="night-person"> Night Person</label>
                <label><input type="radio" name="sleeping-schedule" value="no-preference"> No Preference</label>
            </div>

            <div class="question">
                <label><h2>What is your current work or study schedule?</h2></label>
                <label><input type="radio" name="work_arrangement" value="work-from-home"> Work from Home</label>
                <label><input type="radio" name="work_arrangement" value="on-site-work"> On-site Work</label>
                <label><input type="radio" name="work_arrangement" value="student"> Student</label>
            </div>
            
            <div class="question">
                <label><h2>What best describes your social interaction style?</h2></label>
                <label><input type="radio" name="social_style" value="outgoing"> Very outgoing and love meeting new people.</label>
                <label><input type="radio" name="social_style" value="friendly"> Friendly but prefer small, familiar groups.</label>
                <label><input type="radio" name="social_style" value="occasional"> Comfortable with occasional interactions.</label>
                <label><input type="radio" name="social_style" value="reserved"> Reserved and value personal space.</label>
                <label><input type="radio" name="social_style" value="flexible"> Flexible, depends on the situation.</label>
            </div>
            
            
            
            <div class="question">
                <label><h2>Which languages are you comfortable with?</h2></label>
                <div id="language-options">
                    <label><input type="checkbox" name="language" value="Hindi"> Hindi</label>
                    <label><input type="checkbox" name="language" value="English"> English</label>
                    <label><input type="checkbox" name="language" value="Tamil"> Tamil</label>
                    <label><input type="checkbox" name="language" value="Telugu"> Telugu</label>
                    <label><input type="checkbox" name="language" value="Kannada"> Kannada</label>
                    <label><input type="checkbox" name="language" value="Manipuri"> Manipuri</label>
                    <label><input type="checkbox" name="language" value="Maithili"> Maithili</label>
                    <label><input type="checkbox" name="language" value="Punjabi"> Punjabi</label>
                    <label><input type="checkbox" name="language" value="Odia"> Odia</label>
                    <label><input type="checkbox" name="language" value="Nepali"> Nepali</label>
                    <label><input type="checkbox" name="language" value="Marathi"> Marathi</label>
                    <label><input type="checkbox" name="language" value="Malayalam"> Malayalam</label>
                    <label><input type="checkbox" name="language" value="Konkani"> Konkani</label>
                    <label><input type="checkbox" name="language" value="Kashmiri"> Kashmiri</label>
                    <label><input type="checkbox" name="language" value="Assamese"> Assamese</label>
                    <label><input type="checkbox" name="language" value="Other" onclick="toggleOtherLanguage(this)"> Other</label>
                </div>
                <div id="other_language_input" style="display:none; margin-top: 10px;">
                    <label for="other_language">Please specify:</label>
                    <textarea id="other_language" name="other_language" rows="2" cols="30" placeholder="Enter other languages here"></textarea>
                </div>
            </div>
             
          
            <div class="question">
                <label><h2>Are you comfortable sharing a room with a smoker?</h2></label>
                <label><input type="radio" name="smoking" value="yes" required> Yes</label>
                <label><input type="radio" name="smoking" value="no"> No</label>
            </div>

            <div class="question">
                <label><h2>Do you consume alcohol?</h2></label>
                <label><input type="radio" name="alcohol" value="yes"> Yes</label>
                <label><input type="radio" name="alcohol" value="no"> No</label>
            </div>
            
            <div class="question">
                <label><h2>How important is cleanliness to you?</h2></label>
                <label><input type="radio" name="cleanliness" value="very-important"> Very important</label>
                <label><input type="radio" name="cleanliness" value="moderately-important"> Moderately important</label>
                <label><input type="radio" name="cleanliness" value="not-important"> Not important</label>
            </div>
            
            <div class="question">
                <label><h2>Do you prefer a quiet environment?</h2></label>
                <label><input type="radio" name="quiet-environment" value="yes"> Yes</label>
                <label><input type="radio" name="quiet-environment" value="no"> No</label>
                <label><input type="radio" name="quiet-environment" value="flexible"> Flexible</label>
            </div>

            <div class="question">
                <label for="entertain-guests">
                    <h2>How often do you entertain guests?</h2>
                </label>
                <input type="radio" id="rarely" name="entertain-guests" value="rarely">
                <label for="rarely" style="display: inline;">Rarely</label><br>
                <input type="radio" id="occasionally" name="entertain-guests" value="occasionally">
                <label for="occasionally" style="display: inline;">Occasionally</label><br>
                <input type="radio" id="frequently" name="entertain-guests" value="frequently">
                <label for="frequently" style="display: inline;">Frequently</label><br>
            </div>

            
            <div class="question">
                <label><h2>Would you like to spend time with your roommate (e.g., cooking, watching movies)?</h2></label>
                <label><input type="radio" name="roommate-time" value="yes"> Yes</label>
                <label><input type="radio" name="roommate-time" value="no"> No</label>
                <label><input type="radio" name="roommate-time" value="sometimes"> Depends on the arrangement.</label>
            </div>
           
            


            
            <div class="question">
                <label><h2>Are you comfortable sharing groceries or meals with your roommate?</h2></label>
                <label><input type="radio" name="sharing-meals" value="yes"> Yes</label>
                <label><input type="radio" name="sharing-meals" value="no"> No</label>
                <label><input type="radio" name="sharing-meals" value="depends"> Depends on the arrangement</label>
            </div>
            <div class="question">
    <label><h2>Do you have any dietary preferences or restrictions?</h2></label>
    <label><input type="radio" name="dietary-preference" value="vegetarian"> Vegetarian</label>
    <label><input type="radio" name="dietary-preference" value="non-vegetarian"> Non-vegetarian</label>
    <label><input type="radio" name="dietary-preference" value="vegan"> Vegan</label>
            </div>

            <div class="question">
                <label><h2>Do you own pets or have any preferences regarding living with pets?</h2></label>
                <label><input type="radio" name="pets" value="own-and-comfortable"> Yes, I own pets and I’m comfortable living with them.</label>
                <label><input type="radio" name="pets" value="comfortable-no-pets"> Yes, I’m comfortable living with pets but don’t own any.</label>
                <label><input type="radio" name="pets" value="not-comfortable"> No, I’m not comfortable living with pets.</label>
                <label><input type="radio" name="pets" value="no-preference"> No preference regarding pets.</label>
            </div>
            <div class="question">
                <label for="additional-preferences"><h2>Additional Preferences or Notes:</h2></label>
                <textarea id="additional-preferences" name="additional-preferences" placeholder="Write your preferences..." rows="4"></textarea>
            </div>

            <button type="submit">Submit</button>
        </form>
    </div>
    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById('ques-withRoom-form');
        
    
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get("userId");
        
            form.addEventListener('submit', async function (event) {
                event.preventDefault();
        
                const formData = new FormData(this);
                const data = {};
        
                formData.forEach((value, key) => {
                    if (data[key]) {
                        if (!Array.isArray(data[key])) {
                            data[key] = [data[key]];
                        }
                        data[key].push(value);
                    } else {
                        data[key] = value;
                    }
                });
        
                // ✅ Add userId to the data sent to backend
                if (userId) {
                    data.userID = userId;
                }
        
                try {
                    const response = await fetch('http://localhost:3000/ques-withRoom/submit-form', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data),
                    });
        
                    const result = await response.json();
        
                    if (response.ok) {
                        
                        window.location.href = `responses.html?userId=${userId}`;
                    } else {
                        alert(result.message || 'Error submitting form.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Error submitting form. Please try again.');
                }
            });
        
        
            const radios = document.querySelectorAll('input[name="location_preference"]');
            const addressDiv = document.getElementById('address-details');
        
            radios.forEach(radio => {
                radio.addEventListener('change', () => {
                    addressDiv.style.display = radio.value === 'yes' ? 'block' : 'none';
                });
            });
        
            function toggleOtherLanguage(checkbox) {
                const otherInput = document.getElementById("other_language_input");
                otherInput.style.display = checkbox.checked ? "block" : "none";
            }
        
            window.toggleOtherLanguage = toggleOtherLanguage; 
        });
        </script>
         -->
         <script>
             document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById('ques-withRoom-form');
    const urlParams = new URLSearchParams(window.location.search);
    const userId = urlParams.get("userId");

    form.addEventListener('submit', async function (event) {
      event.preventDefault();
      const formData = new FormData(form);
      const data = {};

      formData.forEach((value, key) => {
        if (data[key]) {
          if (!Array.isArray(data[key])) {
            data[key] = [data[key]];
          }
          data[key].push(value);
        } else {
          data[key] = value;
        }
      });

      // Ensure userId is appended correctly
      if (userId) {
        data.userId = userId;
      }

      try {
        const response = await fetch('/ques-withRoom/submit-form', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        });

        const result = await response.json();

        if (response.ok) {
          window.location.href = `responses.html?userId=${userId}`;
        } else {
          alert(result.message || 'Error submitting form.');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Error submitting form. Please try again.');
      }
    });
              // Language "Other" toggle logic
              window.toggleOtherLanguage = function (checkbox) {
                const otherInput = document.getElementById("other_language_input");
                otherInput.style.display = checkbox.checked ? "block" : "none";
              };
            });
          </script>
</body>
</html> 














